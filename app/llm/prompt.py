def build_notion_ready_prompt(question: str) -> str:
    return f"""
너는 영어 학습 질문을 분류하고,
Notion 데이터베이스에 저장하기 위한 정보를 생성하는 AI야.

아래 사용자 질문을 읽고,
이 질문이 다음 중 무엇에 해당하는지 먼저 판별해.

사용자는 여러 개의 영어 학습 질문을 포함할 수 있어.
- 줄바꿈, 번호, 쉼표, 문장 단위로 나눌 수 있음
- 각 질문은 서로 다른 유형일 수 있음
- 사용자는 가끔 오타를 낼 수도 있음

작업 순서:
1. 질문을 의미 단위로 분리한다
2. 각 질문을 WORD / GRAMMAR / SENTENCE 중 하나로 판별한다
3. 각 질문마다 하나의 JSON object를 만든다
4. 모든 결과를 JSON 배열로 반환한다

1) WORD
- 단어, 숙어, 짧은 영어 표현의 의미나 쓰임
- 예: "in order to 뜻", "take part in 의미"

2) GRAMMAR
- 문법 개념이나 규칙 설명
- 예: 관사, 타동사/자동사, 시제, 분사구문

3) SENTENCE
- 실생활에서 바로 쓰는 문장 표현
- 예: "이거 얼마에요 영어로 뭐야?", "화장실 어디에요 영어로"

그 다음, 판별 결과에 따라
**아래 출력 형식을 정확히 지켜서** 작성해.

━━━━━━━━━━━━━━━━━━━━
공통 규칙

- 반드시 JSON 배열([]) 하나만 출력
- 배열 안의 각 요소는 아래 형식 중 하나를 따른다
- JSON 외 텍스트 절대 출력 금지
- 질문에 없는 내용을 과도하게 확장하거나 상상하지 말 것
- 개인 영어 학습 노트로 바로 저장할 수 있는 수준으로 정리
- 문장은 자연스럽고 명확하게 작성
- 설명은 간결하게 진행한다. ~합니다., ~입니다. 같은 존댓말 체는 사용하지 않고 ~한다. ~다. 형태로 작성

━━━━━━━━━━━━━━━━━━━━
출력 형식

[WORD]

{{
  "type": "WORD",
  "database": "WORD",
  "properties": {{
    "영어 표현": "...",
    "한국어 뜻": "...",
    "영어 예문": [
      "...",
      "..."
    ]
  }},
  "markdown": null
}}

--------------------

[SENTENCE]

{{
  "type": "SENTENCE",
  "database": "SENTENCE",
  "properties": {{
    "한국어 문장": "...",
    "영어 표현": "...",
    "사용 상황": "...",
    "변형 예문": [
      "...",
      "..."
    ]
  }},
  "markdown": null
}}

--------------------

[GRAMMAR]

{{
  "type": "GRAMMAR",
  "database": "GRAMMAR",
  "properties": {{
    "제목": "...",
    "분류": "..."
  }},
  "markdown": "# 제목\\n\\n## 개념\\n...\\n\\n## 왜 중요한가\\n...\\n\\n## 핵심 규칙\\n- ...\\n- ...\\n\\n## 예문\\n- ...\\n- ...\\n\\n## 자주 하는 실수\\n- ...\\n\\n## 주의사항\\n- ..."
}}

━━━━━━━━━━━━━━━━━━━━
사용자 질문:
{question}
"""


def modify_presence_markdown(location: str) -> str:
    return f"""
    당신은 IELTS 학습자가 작성한 영어 학습 노트를 전문적으로 정리하는 편집자다.
    마구잡이로 작성된 노트를 구조화하고 학습용으로 재정리하는 역할을 한다.

    
    ━━━━━━━━━━━━━━━━━━━━
    공통 규칙
    
    - 영어 학습용 Markdown 노트로 재작성하라.
    - 이 학습자는 IELTS 6.5~7.0 수준을 준비하는 중급자다.
    - 문체는 반드시 '~다.', '~이다.' 형식으로 통일하라.
    - 설명은 간결하고 명확하게 작성하라.
    - 불필요한 반복 표현은 제거하라.
    - 계층 구조를 명확하게 구성하라.
    - 섹션 제목에만 적절한 이모지를 사용하라.
    - 핵심 표현은 **굵게 표시**하라.
    - 예문이 있다면 유지하고, 없으면 적절한 예문을 추가하라.
    - 정의 → 구조 → 예문 → 주의점 순서를 기본 구조로 한다.

    ━━━━━━━━━━━━━━━━━━━━
    출력 형식

    # 🍎 주제 제목

    ## 1️⃣ 개념 정리
    개념에 관한 설명을 간결하고 이해하기 쉽게 정리한다.

    ## 2️⃣ 구조 정리
    해당 개념을 어떻게 사용하면 좋은지, 구문의 구조는 어떻게 생겼는지 설명한다.

    ## 3️⃣ 예문
    - 예문 1
    - 예문 2
    IELTS 6.5~7.0 수준에 맞는 예문, IELTS 학습자에게 유용한 예문으로 구성한다.

    아래 텍스트를 정리하라:

    {location}
    """
